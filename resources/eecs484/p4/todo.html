<!DOCTYPE html>
<html>
<head>
    <title>Katie Steinberg | Resources | EECS 370 | Project 2Home</title>
    <link rel="shortcut icon" href="/img/icons/icon.ico" >
    <meta name="Keywords" content="umich, computer science, university of michigan,
                                   student, intern, EECS, katie steinberg, caitlin steinberg,
                                   skydiving, web developer, software engineer, internship, csteinb">
    <meta name="Description" content="Katie Steinberg. Computer science student at the University of Michigan.
    Programmer at Michigan Engineering Integrative Systems + Design. Skydiver.">

    <meta name="viewport" content="width=device-width, initial-scale=1.0"><link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>
    <link href="/css/style.css" rel="stylesheet" type="text/css">
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <script src="http://pre.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-46802193-1', 'ktsteinberg.com');
        ga('send', 'pageview');

    </script>
    <script>
        $( ".dropdown" ).hover(function(event) {
            event.preventDefault();
            $( this ).children(".dropdown-menu").show();
        });
    </script>
</head>
<body>
<nav class="navbar navbar-default" role="navigation">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">KS</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
            <li><a href="/">Home</a></li>
            <li><a href="/KatieSteinbergResume.pdf">Resume</a></li>
            <li><a href="/projects.html">Projects</a></li>
            <li class="dropdown active">
                 <a id="dLabel" role="button" data-toggle="dropdown" class="btn" data-target="#" href="/resources.html">
                      Resources <span class="caret"></span>
                 </a>
                 <ul class="dropdown-menu multi-level" role="menu" aria-labelledby="dropdownMenu">
                      <li class="dropdown-submenu">
                           <a tabindex="-1" href="/resources.html#eecs370">EECS 370</a>
                           <ul class="dropdown-menu">
                                <li><a tabindex="-1" href="/resources/eecs370/project2.html">Project 2 Specs</a></li>
                                <li><a href="/resources/eecs370/project3.html">Project 3 Specs</a></li>
                                <li><a href="/resources/eecs370/project4.html">Project 4 Specs</a></li>
                                <li class="divider"></li>
                                <li><a href="/resources/eecs370/cache-notes.html">Cache notes</a></li>
                                <li><a href="/resources/eecs370/lc2k-instructions.html">LC2K reference</a></li>
                           </ul>
                      </li>
                      <li class="dropdown-submenu">
                           <a tabindex="-1" href="/resources.html#eecs484">EECS 484</a>
                           <ul class="dropdown-menu">
                                <li><a tabindex="-1" href="/resources/eecs484/p4/project4.html">Project 4</a></li>
                           </ul>
                      </li>
                 </ul>
            </li>
            <li><a href="/skydiving.html">Skydiving</a></li>
            <li><a href="/contact.html">Contact</a></li>
        </ul>
        <!--           *** SEARCH ***
        <form class="navbar-form navbar-right" role="search">
            <div class="form-group">
                <input type="text" class="form-control" placeholder="Search">
            </div>
            <button type="submit" class="btn btn-default">Submit</button>
        </form> -->
    </div><!-- /.navbar-collapse -->
</nav>
<div class="container resources" id="eecs484">

<h1 id="to-do">To Do</h1>
<p>Implement important relational operators and utilities. Find class definitions in <a href="query.h">query.h</a>. Fill in the implementations of these operators in files:</p>
<ul>
<li><label>
  <input type="checkbox" class="task-list-item-checkbox">
   <a href="#insert">insert.cpp</a>
</label></li>
<li><label>
  <input type="checkbox" class="task-list-item-checkbox">
   <a href="select.cpp">select.cpp</a>
</label></li>
<li><label>
  <input type="checkbox" class="task-list-item-checkbox">
   <a href="join.cpp">join.cpp</a>
</label></li>
<li><label>
  <input type="checkbox" class="task-list-item-checkbox">
   <a href="indexselect.cpp">indexselect.cpp</a>
</label></li>
<li><label>
  <input type="checkbox" class="task-list-item-checkbox">
   <a href="scanselect.cpp">scanselect.cpp</a>
</label></li>
<li><label>
  <input type="checkbox" class="task-list-item-checkbox">
   <a href="snl.cpp">snl.cpp</a>
</label></li>
<li><label>
  <input type="checkbox" class="task-list-item-checkbox">
   <a href="inl.cpp">inl.cpp</a>
</label></li>
<li><label>
  <input type="checkbox" class="task-list-item-checkbox">
   <a href="smj.cpp">smj.cpp</a>
</label></li>
</ul>
<h2 id="from-getting-started-section">From "Getting Started" Section</h2>
<blockquote>
<p>A good starting point is to implement the insert method first.</p>
</blockquote>
<p>To insert a record into "stars", the insert method needs to:</p>
<ol>
<li>Insert the record into the Heapfile corresponding to "stars"</li>
<li>Insert the record ID into each index that exists on "stars"</li>
</ol>
<p>To insert the record, you first need to map the data from the arguments to insert into a Record object</p>
<p>The Record object is defined in <a href="page.h">page.h</a> as:</p>
<pre class="editor-colors"><code class="lang-cpp">struct Record {
   void* data;
   int length;
}
</code></pre>
<p>The data that is passed in is in <em>attrList</em>, which is an array of <em>attrInfo</em> objects. <em>attrInfo</em> is defined in <a href="catalog.h">catalog.h</a> as:</p>
<pre class="editor-colors"><code class="lang-cpp">typedef struct {
   char relName[MAXNAME];   // relation name
   char attrName[MAXNAME];  // attribute name
   int attrType;            // INTEGER, DOUBLE, or STRING
   int attrLen;             // length of attribute in bytes
   void *attrValue          // ptr to binary value (used by the
                            //    parser for insert into statements)
} attrInfo;
</code></pre>
<p>For the INSERT command:</p>
<pre class="editor-colors"><code class="lang-sql">INSERT INTO stars(starid, real_name, plays, soapid)
   VALUES (100, 'Posey, Parker', 'Tess', 6);
</code></pre>
<p>the four elements of the array will be something like the following:</p>
<pre class="editor-colors"><code>[
   &lt;"stars", "starid", INTEGER, -1, pointer to 4 bytes containing 100&gt;,
   &lt;"stars", "real_name", STRING, -1, pointer to "Posey, Parker"&gt;,
   &lt;"stars", "plays", STRING, -1, pointer to "Tess"&gt;,
   &lt;"stars", "soapid", INTEGER, -1, pointer to 4 bytes containing 6&gt;,
]
</code></pre>

<h2 id="insert" style="border-bottom: 2px solid black;
padding: 10px 0;">Inserting a Record</h2>

<p>To insert the record, you first need to map the data from the arguments to insert into a Record object</p>
<p>The Record object is defined in <a href="page.h">page.h</a> as:</p>
<pre class="editor-colors"><code class="lang-cpp">struct Record {
   void* data;
   int length;
}
</code></pre>
<p>The data that is passed in is in <em>attrList</em>, which is an array of <em>attrInfo</em> objects. <em>attrInfo</em> is defined in <a href="catalog.h">catalog.h</a> as:</p>
<pre class="editor-colors"><code class="lang-cpp">typedef struct {
   char relName[MAXNAME];   // relation name
   char attrName[MAXNAME];  // attribute name
   int attrType;            // INTEGER, DOUBLE, or STRING
   int attrLen;             // length of attribute in bytes
   void *attrValue          // ptr to binary value (used by the
                            //    parser for insert into statements)
} attrInfo;
</code></pre>
<p><em>attrCat</em> is a global variable that points to the attribute table for the catalog.</p>
<pre class="editor-colors"><code class="lang-cpp"> const Status getInfo(const string &amp; rName,
               const string &amp; attrName,
               AttrDesc &amp;record);
</code></pre>
<p>The AttrDesc struct is defined as:</p>
<pre class="editor-colors"><code class="lang-cpp">typedef struct {
  char relName[MAXNAME];                // relation name
  char attrName[MAXNAME];               // attribute name
  int attrOffset;                       // attribute offset
  int attrType;                         // attribute type
  int attrLen;                          // attribute length
  int indexed;                          // TRUE if indexed
} AttrDesc;
</code></pre>
<br>
<p style="font-size: 18px;">At this point, you have all the information to</p>
<ol>
<li><a href="#allocate-memory">allocate the memory for a record</a></li>
<li><a href="#fill-with-data">fill it with data</a></li>
<li><a href="#insert-into-heapfile">insert it into the heapfile</a></li>
</ol><br>
<h3 id="allocate-memory">To allocate the memory for the record</h4>
<ul>
<li>you need to know the record size</li>
<li>create a Record object</li>
<li>allocate the correct number of bytes (record size) for the data field of the record</li>
</ul><br>
<h3 id="fill-with-data">Fill it with data</h4>
<ul>
<li>fill with data from the attrList</li>
<li>use the C++ built-in function <a href="http://www.cplusplus.com/reference/cstring/memcpy/">memcpy</a> to do that</li>
<li>rely on the data from the RelDesc object returned by the getInfo call to determine:<ul>
<li>the offsets for each attribute</li>
<li>the # of bytes to copy</li>
</ul>
</li>
</ul><br>
<h3 id="insert-into-heapfile">Insert the record into the heapfile</h4>
<ul>
<li>Once the record is created, call insertRecord on the ehapfile for the relation</li>
<li>FIRST, the constructor for the "relation" heapfile needs to be called<ul>
<li>creates a heapfile if one doesn't exist</li>
<li>if one exists, it opens the heapfile</li>
</ul>
</li>
<li>THEN, the record you created needs to be inserted</li>
<li>This returns a Record ID</li>
</ul><br><br>
<h3 id="index-the-record">Index the Record</h4>
<ul>
<li>The Record ID you just created needs to be inserted in each index for the relation</li>
<li>To determine if there is one or more index for the relation, you need to look at the catalogs</li>
</ul>

</div>
<a style="display: none" href="https://plus.google.com/104077635281835092104?rel=author">Google</a>
</body>
<footer>By Katie Steinberg</footer>
<!-- Google Analytics -->
<script>
    (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,&#39;script&#39;,&#39;//www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;);

    ga(&#39;create&#39;, &#39;UA-46802193-1&#39;, &#39;ktsteinberg.com&#39;);
    ga(&#39;send&#39;, &#39;pageview&#39;);

</script>
<!-- End Google Analytics -->

</html>